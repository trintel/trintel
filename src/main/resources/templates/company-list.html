<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:include="layout :: page">

<head>
	<th:block th:fragment="title">
		<title>Companies - Trintel</title>
	</th:block>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
	<th:block th:fragment="content">
		<h1 th:text="#{companies}"></h1>
		<p th:text="#{cldescr}" sec:authorize="hasRole('ADMIN')"></p>
		<div th:unless="${companies.isEmpty()}">
			<th:block th:each="company : ${companies}">
				
					<div class="card mb-3">
						<!-- Card base with arrow on the right -->
						<div class="card-body d-flex align-items-center justify-content-between">
							<!-- Card content -->
							<div class="w-100 d-lg-flex align-items-center">
								<!-- Company name, logo and description -->
								
								<div class="col d-flex align-items-center">
									<div class="companylogo companylogo-md me-3">
										<img th:src="@{'/company/logo/' + ${company.id}}" />
									</div>
									<div>
										<a th:href="@{'/companies/' + ${company.id}}" class="text-decoration-none text-black">
										<h5 class="card-title" th:text="${company.name}"></h5></a>
										<p class="card-text text-secondary" th:text="${company.description}"></p>
									</div>
								</div>
								
								<!-- Buttons -->
								<div class="float-lg-end mt-3 mt-lg-0">
									<form action="#" th:action="@{'/companies/delete/' + ${company.id}}" method="post"
										sec:authorize="hasRole('ADMIN')">
										<button class="btn btn-danger" type="submit">
											<span th:text="#{delete}" />
											<i class="bi bi-trash3"></i>
										</button>
									</form>
									<a sec:authorize="hasRole('STUDENT')" th:href="@{'/transaction/' + ${company.id}} + '/create'" class="btn btn-light">
										<i class="bi bi-cart-plus"></i> <span th:text="#{createTransaction}" />
									</a>
								</div>
							</div>
							<a th:href="@{'/companies/' + ${company.id}}" class="text-decoration-none">
								<i class="bi bi-chevron-right text-black ms-3" style="font-size:2rem;"></i>
							</a>
						</div>
					</div>
				</a>
			</th:block>
		</div>

		<p th:if="${companies.isEmpty()}" th:text="#{noCompaniesFound}"></p>

		<div class="d-flex justify-content-center justify-content-md-end" sec:authorize="hasRole('ADMIN')">
			<a class="btn btn-primary" th:href="@{companies/add}" th:text="#{registerCompany}"></a>
		</div>
	</th:block>
</body>

</html>